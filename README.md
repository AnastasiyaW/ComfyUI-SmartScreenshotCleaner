# ComfyUI Image Preprocessor

–ù–∞–±–æ—Ä –Ω–æ–¥ –¥–ª—è –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –æ—Ç UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

## –ù–æ–¥—ã

### 1. AutoBorderCrop
–ü—Ä–æ—Å—Ç–∞—è –Ω–æ–¥–∞ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ –æ–¥–Ω–æ—Ç–æ–Ω–Ω—ã—Ö —Ä–∞–º–æ–∫ (—Ç—ë–º–Ω—ã—Ö, —Å–≤–µ—Ç–ª—ã—Ö, –ª—é–±—ã—Ö).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `sensitivity` ‚Äî —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ä–∞–º–∫–∏
- `min_border_size` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ä–∞–º–∫–∏ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏
- `min_content_percent` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –æ–±—Ä–µ–∑–∫–∏

### 2. SmartScreenshotCleaner ‚≠ê
–£–º–Ω–∞—è –Ω–æ–¥–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –æ—Ç UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üéØ **YOLO –¥–µ—Ç–µ–∫—Ü–∏—è** UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (deki-yolo): View, ImageView, Text, Line
- üîç **SOD –¥–µ—Ç–µ–∫—Ü–∏—è** –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (U2Net/rembg)
- üé® **LaMa –∏–Ω–ø–µ–∏–Ω—Ç–∏–Ω–≥** ‚Äî –∑–∞–ª–∏–≤–∫–∞ UI —Ü–≤–µ—Ç–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÇÔ∏è **–£–º–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞** –¥–æ –æ–±–ª–∞—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–†–µ–∂–∏–º—ã:**
- `hybrid` ‚Äî YOLO + SOD (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `yolo_only` ‚Äî —Ç–æ–ª—å–∫–æ –¥–µ—Ç–µ–∫—Ü–∏—è UI
- `sod_only` ‚Äî —Ç–æ–ª—å–∫–æ –¥–µ—Ç–µ–∫—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `full_inpaint` ‚Äî –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å –∑–∞–ª–∏–≤–∫–æ–π UI

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `use_sod` ‚Äî –≤–∫–ª—é—á–∏—Ç—å SOD –¥–µ—Ç–µ–∫—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `use_inpainting` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∑–∞–ª–∏–≤–∫—É UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `yolo_confidence` ‚Äî –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ YOLO
- `sod_threshold` ‚Äî –ø–æ—Ä–æ–≥ SOD –º–∞—Å–∫–∏
- `expand_mask_px` ‚Äî —Ä–∞—Å—à–∏—Ä–∏—Ç—å –º–∞—Å–∫—É UI –¥–ª—è –ª—É—á—à–µ–≥–æ –∏–Ω–ø–µ–∏–Ω—Ç–∏–Ω–≥–∞
- `crop_to_content` ‚Äî –æ–±—Ä–µ–∑–∞—Ç—å –¥–æ –æ–±–ª–∞—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–í—ã—Ö–æ–¥—ã:**
- `cleaned_image` ‚Äî –æ—á–∏—â–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `original_cropped` ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª —Å –æ–±—Ä–µ–∑–∫–æ–π
- `ui_mask` ‚Äî –º–∞—Å–∫–∞ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `content_mask` ‚Äî –º–∞—Å–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (SOD)
- `crop_top/bottom/left/right` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—Ä–µ–∑–∫–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd ComfyUI/custom_nodes
git clone https://github.com/your/comfy_image_preprocessor
cd comfy_image_preprocessor
pip install -r requirements.txt
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
```bash
pip install ultralytics huggingface_hub opencv-python
```

**SOD (–≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω):**
```bash
pip install rembg[gpu]  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
# –∏–ª–∏
pip install transparent-background
```

**LaMa –∏–Ω–ø–µ–∏–Ω—Ç–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```bash
pip install simple-lama-inpainting
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –û—á–∏—Å—Ç–∫–∞ Instagram —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
```
[Load Image] ‚Üí [SmartScreenshotCleaner] ‚Üí [Save Image]
                    mode: hybrid
                    use_sod: True
                    crop_to_content: True
```

### –ü—Ä–∏–º–µ—Ä 2: –ò–Ω–ø–µ–∏–Ω—Ç–∏–Ω–≥ UI –Ω–∞ —Ñ–æ—Ç–æ
```
[Load Image] ‚Üí [SmartScreenshotCleaner] ‚Üí [Save Image]
                    mode: full_inpaint
                    use_inpainting: True
                    expand_mask_px: 10
```

## –ú–æ–¥–µ–ª–∏

- **YOLO**: [orasul/deki-yolo](https://huggingface.co/orasul/deki-yolo) ‚Äî –¥–µ—Ç–µ–∫—Ü–∏—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **SOD**: U2Net —á–µ—Ä–µ–∑ rembg ‚Äî –¥–µ—Ç–µ–∫—Ü–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- **LaMa**: [simple-lama-inpainting](https://github.com/enesmsahin/simple-lama-inpainting) ‚Äî –∏–Ω–ø–µ–∏–Ω—Ç–∏–Ω–≥

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
